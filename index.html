<!DOCTYPE html>
<html lang="es">
<head>
  <link rel="icon" href="data:,"> <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Patofelting - Creaciones en Fieltro</title>
  <link rel="stylesheet" href="Untitled-1.css" />

  <!-- patr√≥n decorativo -->
  <svg width="0" height="0" style="position:absolute;">
    <defs>
      <pattern id="lana-pattern" patternUnits="userSpaceOnUse" width="100" height="100">
        <path d="M20,50 Q35,30 50,50 Q65,70 80,50" stroke="#7ed957" stroke-width="1.5" fill="none" opacity="0.1"/>
        <path d="M10,70 Q25,50 40,70 Q55,90 70,70" stroke="#5a8f40" stroke-width="1" fill="none" opacity="0.05"/>
      </pattern>
    </defs>
  </svg>

  <!-- libs -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js" defer></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- variables globales -->
  <script>
    window.SHEET_CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRJwvzHZQN3CQarSDqjk_nShegf8F4ydARvkSK55VabxbCi9m8RuGf2Nyy9ScriFRfGdhZd0P54VS5z/pub?output=csv';
    window.PLACEHOLDER_IMAGE = 'img/placeholder.png';
    window.FIREBASE_URL = 'https://patofelting-b188f-default-rtdb.firebaseio.com/productos.json';
  </script>

  <!-- Firebase App (expone app y db en window) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getDatabase } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyD261TL6XuBp12rUNCcMKyP7_nMaCVYc7Y",
      authDomain: "patofelting-b188f.firebaseapp.com",
      databaseURL: "https://patofelting-b188f-default-rtdb.firebaseio.com",
      projectId: "patofelting-b188f",
      storageBucket: "patofelting-b188f.appspot.com",
      messagingSenderId: "858377467588",
      appId: "1:858377467588:web:cade9de05ebccc17f87b91"
    };

    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);

    // üëá Corregido: exponer ambas referencias para el JS
    window.firebaseApp = app;
    window.firebaseDatabase = database;
  </script>
</head>

<body oncontextmenu="return true;">
  <!-- NAV -->
  <nav class="nav">
    <div class="nav-container">
      <div class="logo-container">
        <img src="img/patofelting.jpg" alt="Logo Patofelting" class="logo-img" />
        <h2 class="logo-text">Patofelting</h2>
      </div>

      <button class="hamburguesa" id="hamburguesa-btn" aria-label="Men√∫ de navegaci√≥n" aria-expanded="false">
        <span></span><span></span><span></span>
      </button>

      <button class="carrito-btn" id="carrito-btn-main" aria-label="Abrir carrito de compras">
        <i class="fas fa-shopping-cart"></i> Carrito (<span id="contador-carrito">0</span>)
      </button>

      <ul class="menu" id="menu">
        <li><a href="#inicio">Inicio</a></li>
        <li><a href="#sobre">Sobre m√≠</a></li>
        <li><a href="blog.html">Mi Historia</a></li>
        <li><a href="#productos">Productos</a></li>
        <li><a href="#contacto">Contacto</a></li>
        <li><a href="#preguntas">Preguntas</a></li>
      </ul>
    </div>
  </nav>

  <!-- Panel Carrito -->
  <div id="carrito-panel" class="carrito-panel">
    <div class="carrito-header">
      <h2>Tu Carrito</h2>
      <button class="cerrar-carrito" aria-label="Cerrar carrito">√ó</button>
    </div>
    <ul id="lista-carrito" class="lista-carrito"></ul>
    <div class="carrito-footer">
      <p id="total">Total: $U 0</p>
      <div class="carrito-acciones">
        <button class="boton-vaciar-carrito">Vaciar Carrito</button>
        <button class="boton-finalizar-compra">Finalizar Compra</button>
      </div>
    </div>
  </div>
  <div class="carrito-overlay"></div>

  <!-- Hero (recortado para brevedad, sin cambios estructurales) -->
  <section id="inicio" class="hero">
    <video autoplay muted loop playsinline class="video-fondo" aria-hidden="true" poster="" preload="metadata">
      <source src="https://i.imgur.com/nWNPya9.mp4" type="video/mp4">
    </video>
    <div class="hero-content">
      <div class="content-wrapper">
        <h1 class="hero-title">Patofelting</h1>
        <h2 class="hero-subtitle">Creaciones con alma en fieltro</h2>
        <p class="hero-description">Figuras √∫nicas, hechas a mano con mucha paciencia.</p>
        <div class="cta-container">
          <a class="cta-button" href="#productos">Ver productos</a>
          <a class="cta-button secondary" href="#contacto">Contactar</a>
        </div>
      </div>
    </div>
    <div class="scroll-indicator">
      <span class="scroll-text">Desliza</span>
      <div class="arrow-down"></div>
    </div>
  </section>

  <!-- Productos + Filtros + Loader + Paginaci√≥n -->
  <section id="productos" class="productos">
    <div class="productos-container">
      <!-- filtros (se mantienen) -->
      <div class="filtros">
        <div class="filtro-precio">
          <label class="filtro-label">Precio</label>
          <div class="price-header">
            <span id="min-price">$U0</span>
            <span id="max-price">$U3000</span>
          </div>
          <div class="range-slider">
            <div class="track"></div>
            <div class="range"></div>

            <input type="range" id="min-slider" min="0" max="3000" step="10" value="0" aria-label="Precio m√≠nimo">
            <input type="range" id="max-slider" min="0" max="3000" step="10" value="3000" aria-label="Precio m√°ximo">

            <span class="thumb-label" id="thumb-label-min" aria-hidden="true">$U0</span>
            <span class="thumb-label" id="thumb-label-max" aria-hidden="true">$U3000</span>
          </div>
        </div>

        <div class="filtro-busqueda">
          <input type="text" class="input-busqueda" placeholder="Buscar por nombre o descripci√≥n..." aria-label="Buscar productos">
        </div>
      </div>

      <div id="galeria-productos" class="galeria-productos"></div>

      <div id="product-loader" class="loader" hidden aria-live="polite">
        <svg class="spinner" viewBox="0 0 50 50" aria-hidden="true">
          <circle class="path" cx="25" cy="25" r="20" fill="none" stroke-width="4"/>
        </svg>
        <p>Cargando productos...</p>
      </div>

      <div id="paginacion" class="paginacion" aria-live="polite"></div>
    </div>
  </section>

  <!-- Modal de Producto (estructura conservada) -->
  <div id="producto-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-hidden="true">
    <div id="modal-contenido" class="modal-contenido-producto">
      <button class="cerrar-modal" aria-label="Cerrar modal" onclick="cerrarModal()">&times;</button>
      <div class="modal-flex">
        <div class="modal-carrusel">
          <img id="modal-imagen" src="" class="modal-img" alt="Imagen del producto">
          <div class="modal-thumbnails" id="modal-thumbnails"></div>
        </div>
        <div class="modal-info">
          <h2 id="modal-nombre"></h2>
          <p id="modal-descripcion"></p>
          <p id="modal-precio"></p>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal aviso previo compra -->
  <div id="aviso-pre-compra-modal" class="modal-aviso" role="dialog" aria-modal="true" hidden>
    <div class="modal-aviso-contenido">
      <h3>üßô‚Äç‚ôÄÔ∏è Antes de confirmar tu pedido</h3>
      <p><strong>Le√© las especificaciones de compra</strong>: caracter√≠sticas, tiempos y devoluciones.</p>
      <div class="modal-aviso-botones">
        <button id="btn-entendido-aviso" class="boton-aviso-entendido">S√≠, he le√≠do y deseo continuar üêë</button>
        <button id="btn-cancelar-aviso" class="boton-aviso-cancelar">Cancelar compra</button>
      </div>
    </div>
  </div>

  <!-- Modal datos de env√≠o -->
  <div id="modal-datos-envio" class="modal-datos-envio" role="dialog" aria-modal="true" hidden>
    <div class="modal-envio-contenido">
      <button id="btn-cerrar-modal-envio" class="cerrar-modal-envio" aria-label="Cerrar modal">√ó</button>
      <div class="modal-envio-header">
        <h3>Completa tus datos</h3>
        <p>Finaliz√° tu compra ingresando la informaci√≥n de env√≠o</p>
      </div>
      <form id="form-envio" class="form-envio">
        <div class="form-grupo">
          <label for="input-nombre">Nombre*</label>
          <input type="text" id="input-nombre" placeholder="Ej: Mar√≠a" required>
        </div>
        <div class="form-grupo">
          <label for="input-apellido">Apellido*</label>
          <input type="text" id="input-apellido" placeholder="Ej: Gonz√°lez" required>
        </div>
        <div class="form-grupo">
          <label for="input-telefono">Tel√©fono*</label>
          <input type="tel" id="input-telefono" placeholder="Ej: 099123456" required>
        </div>
        <div class="form-grupo" id="grupo-direccion">
          <label for="input-direccion">Direcci√≥n*</label>
          <input type="text" id="input-direccion" placeholder="Ej: Av. 18 de Julio 1234" required>
          <small class="ayuda-texto">Solo si seleccion√°s env√≠o</small>
        </div>
        <div class="form-grupo">
          <label for="select-envio">M√©todo de env√≠o*</label>
          <select id="select-envio" required>
            <option value="">Seleccionar m√©todo</option>
            <option value="retiro">Retiro en local (Gratis)</option>
            <option value="montevideo">Env√≠o Montevideo ($150)</option>
            <option value="interior">Env√≠o Interior ($300)</option>
          </select>
        </div>
        <div class="form-notas">
          <label for="input-notas">Notas adicionales</label>
          <textarea id="input-notas" placeholder="Detalles especiales, horarios preferidos, etc." rows="3"></textarea>
        </div>
        <div class="resumen-pedido">
          <h4>Resumen de tu pedido</h4>
          <div id="resumen-productos"></div>
          <div class="resumen-total">
            <span>Total:</span>
            <span id="resumen-total">$U 0</span>
          </div>
        </div>
        <button type="submit" class="boton-confirmar-envio">
          <i class="fab fa-whatsapp"></i> Enviar pedido por WhatsApp
        </button>
      </form>
    </div>
  </div>

  <!-- Modal aviso de stock -->
  <div id="stock-modal" class="modal-stock" hidden>
    <div class="modal-stock-content" role="dialog" aria-modal="true" aria-labelledby="stock-modal-title">
      <button class="modal-stock-close" aria-label="Cerrar aviso">&times;</button>
      <h2 id="stock-modal-title" class="modal-stock-title">¬øTe avisamos cuando haya stock?</h2>
      <form id="stock-form" autocomplete="on">
        <input type="email" id="stock-email" name="stock-email" class="modal-stock-input" placeholder="Tu email" required>
        <button type="submit" class="modal-stock-confirm">Confirmar</button>
      </form>
      <div id="stock-modal-feedback" class="modal-stock-feedback" hidden></div>
    </div>
  </div>

  <!-- Contacto (sin cambios de estructura) -->
  <section id="contacto" class="contact">
    <div class="contact-container">
      <div class="contact-text">
        <h2>Cont√°ctame</h2>
        <p>¬øTienes alguna pregunta, una figura personalizada o simplemente saludar? ¬°Escribime!</p>
      </div>
      <!-- ... tu formulario actual ... -->
    </div>
  </section>

  <!-- Footer (id√©ntico) -->
  <footer class="footer">
    <div class="footer-container">
      <div class="footer-brand">
        <img src="img/patofeltinglogo.jpg" alt="Patofelting logo" class="footer-logo" />
        <h2>Patofelting</h2>
        <p>Artesan√≠a con amor desde Uruguay</p>
      </div>
      <nav class="footer-nav">
        <a href="#productos">Productos</a>
        <a href="comocomprar.html">¬øC√≥mo comprar?</a>
        <a href="politicaempresa.html">Politica de empresa</a>
        <a href="https://instagram.com/patofelting" target="_blank" rel="noopener" aria-label="Instagram">
          <img src="img/instagram.png" alt="Instagram" class="icono-instagram" />
          <span>Instagram</span>
        </a>
        <a href="mailto:patofelting@gmail.com" class="footer-mail" aria-label="Correo electr√≥nico">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none">
            <rect x="2" y="5" width="20" height="14" rx="3" fill="#388e3c"/>
            <polyline points="4,7 12,13 20,7" stroke="#fff" stroke-width="2" fill="none"/>
          </svg>
          <span>Correo</span>
        </a>
      </nav>
    </div>
    <div class="footer-bottom">
      <p>¬© 2025 Patofelting. Hecho con ‚ô• en Uruguay.</p>
    </div>
  </footer>

  <!-- Tu JS principal -->
  <script src="Untitled-1.js" defer type="module"></script>
</body>
</html>
